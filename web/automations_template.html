<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!--

	This website is powered by Contao Open Source CMS :: Licensed under GNU/LGPL
	Copyright ©2005-2023 by Leo Feyer :: Extensions are copyright of their respective owners
	Visit the project website at http://www.contao.org for more information

//-->
  <base href="/">

  <title>habitron - Smart Configurator</title>
  <link rel="shortcut icon" href="configurator_files/habitron.ico" type="image/x-icon">

  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="configurator_files/style.css" rel="stylesheet" type="text/css" media="screen">
  <link href="configurator_files/nav.css" rel="stylesheet" type="text/css" media="screen">
  <link href="configurator_files/popup.css" rel="stylesheet" type="text/css" media="screen">
  <link href="configurator_files/tablesort.css" rel="stylesheet" type="text/css" media="screen">
  <!--[if IE]>
<link href="tl_files/habitron/style_ie.css" rel="stylesheet" type="text/css" media="screen"  />
<![endif]-->

  <meta name="robots" content="index,follow">
  <style type="text/css" media="screen">
    <!--/*
    -->
  <![CDATA[/*><!--*/
/*]]>*/-->
  </style>
  <link rel="stylesheet" href="configurator_files/contao.css" type="text/css" media="screen">
  <!--[if lte IE 7]><link rel="stylesheet" href="system/iefixes.css" type="text/css" media="screen" /><![endif]-->
  <link rel="stylesheet" href="configurator_files/tinymce.css" type="text/css" media="screen">
  <script type="text/javascript" src="configurator_files/tablesort.js"></script>
</head>

<body id="top" class="modules">
  <div id="container">
    <div id="content">
      <div id="header">
        <div class="inside">
          <div style="height:20px; text-align: right; padding-top: 35px; padding-right: 60px;">
            <a href="http://habitron.de/habitron.html"><img id="logo_habitron" src="configurator_files/logo.png"
                width="267" height="47"></a>
            <a href="./">
              <div>
                <h0>Smart Configurator</h0>
              </div>
            </a>
          </div>
          <div class="mod_article block" id="pic">


            <div class="ce_image block">

              <div class="image_container">
                <img src="configurator_files/configuration.jpg" width="980" height="200" alt="Habitron GmbH">
              </div>

            </div>

          </div>

        </div>
      </div>
      <div id="inhalt">
        <div id="left">
          <div class="inside">
            <div class="mod_article block" id="bild-links">
              <div class="ce_image block">
                <div class="image_container">
                  <img id="hbtn_module_left" src="configurator_files/controller.jpg" alt="Habitron GmbH">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="mitte_automtn">
          <div class="inside">
            <div class="mod_article block" id="text-231">


              <div class="ce_text block">
                <!-- MainContentStart -->
                <h1>ContentTitle</h1>

                <h2>ContentSubtitle</h2>
                <p>ContentSubtext</p>
                <br>
                <p>ContentText</p>
                <!-- MainContentEnd -->
              </div>
              <div id="autmnbuttons">
                <button name="NewAutomtn" class="config_button" form="automations_table" 
                  type="submit" id="new_button" value="new">Neu</button>
                <!--button name="NewExtAutomtn" class="config_button" id="new_ext_button" value="newext">Neu</button-->
                <button name="EditAutomtn" class="config_button" id="change_button" type="submit"
                  form="automations_table" value="change">Ändern</button>
                <button name="DelAutomtn" class="config_button" id="del_button" value="del">Löschen</button>
              </div>
            </div>
          </div>
        </div>
        <div id="clear"></div>
      </div>
      <div id="footer">
        <div class="inside">
          <div id="confbuttons">
            <form action="automations/step">
              <button name="ModSettings" class="config_button" id="config_button_bck" type="submit" form="automations_table"
                value="back-ModAddress">zurück</button>
              <button name="ModSettings" class="config_button" id="config_button_cnc" type="submit" form="automations_table"
                value="cancel-ModAddress">Abbruch</button>
              <button name="ModSettings" class="config_button" id="config_button_sav" type="submit" form="automations_table"
                value="save-ModAddress">Speichern</button>
              <button name="ModSettings" class="config_button" id="config_button_nxt" type="submit" form="automations_table"
                value="next-ModAddress">weiter</button>
            </form>
          </div>
        </div>
      </div>

    </div>
  </div>
  <div id="automtn_del_popup" class="popup">
    <div class="popup-content">
      <h1>ContentTitle</h1>
      <h2>Löschen der ausgewählten Automatisierung</h2>
      <p id="automtn_desc">automation_description</p>
      <h3>Sind Sie sicher?</h3>
      <div id="del_buttons">
        <button id="close_del_popup">Abbruch</button>
        <button id="del_automtn" type="submit" form="automations_table">Löschen</button>
      </div>
    </div>
  </div>
  <div id="wait_popup" class="popup">
    <div class="popup-content">
      <h1 id="msg_popup_txt">ContentTitle</h1>
      <h3 id="msg_popup_txt">Einstellungen speichern</h3>
      <div id="image_container_wait">
        <img src="configurator_files/wait_red.gif" alt="Please wait" id="msg_popup_img">
      </div>
    </div>
  </div>
  <div id="automtn_new_popup" class="popup">
    <div class="popup-content" style="height: 200px;">
      <h1>ContentTitle</h1>
      <h2>Neue externe Automatisierung</h2>
      <h3>Auslösendes Modul auswählen</h3>
      <form id="sel-src-module" action="automations/automtns" method="post">
        <select name="src_module" style="position: absolute; width: 385px" id="src-module">
          <option value="">-- Modul wählen --</option>
        </select>
        <input id="sel-automtn" name="sel_automtn" style="position: absolute; visibility: hidden">
        <div id="new_buttons">
          <button id="close_new_popup">Abbruch</button>
          <button id="ext_automtn" >Weiter</button>
        </div>
      </form>
    </div>
  </div>
</body>
<script type="text/javascript" src="configurator_files/button_help.js"></script>
</html>

<script type="text/javascript">
  const frm = document.getElementById("automations_table");
  const mod_sel = document.getElementById("src-module");
  const src_frm = document.getElementById("sel-src-module");
  del_button.addEventListener("click", function () {
    openDelPopup();
  });
  close_del_popup.addEventListener("click", function () {
    automtn_del_popup.classList.remove("show");
  }); 
  if (document.getElementById("new_ext_button") != null) {
    new_ext_button.addEventListener("click", function () {
      openNewPopup();
    });
  }
  close_new_popup.addEventListener("click", function () {
    automtn_new_popup.classList.remove("show");
  });
  ext_automtn.addEventListener("click", function () {
    continueWithModule();
    });
  function openDelPopup() {
    var sel = 0
    const atm_desc = document.getElementById("automtn_desc")
    const atm_tbl = document.getElementById("atm-table")
    var tbl_row
    for (let l = 0; l < frm.length; l++) {
      if (frm[l].checked) {
        sel = l;
      }
    }
    del_automtn.value = "del_automtn-" + sel;
    tbl_row = atm_tbl.rows[sel+1];
    var header_rows = []
    var header_positions = []
    var autom_rows = []
    var hr = 0
    var sel_position = 0
    if (atm_tbl.rows[0].cells[0].innerText.search("Modul") > 0) {
      for (let r = 0; r < atm_tbl.rows.length; r++) {
        if (atm_tbl.rows[r].id == "atm-th") {
          header_rows.push(r);
          header_positions.push(atm_tbl.rows[r].offsetTop);
        }
        else {
          autom_rows.push(r)
        }
      }
      tbl_row = atm_tbl.rows[autom_rows[sel]];
      sel_position = tbl_row.offsetTop;
      for (hr = 0; hr < header_rows.length; hr++) {
        if (sel_position < header_positions[hr])
          break
      }
      desc_txt = atm_tbl.rows[header_rows[hr - 1]].cells[0].innerText + ":<br>";
    }
    else {
      desc_txt = "";
    }
    desc_txt += tbl_row.cells[0].innerText + "&nbsp;(" + tbl_row.cells[1].innerText + ")<br>" + tbl_row.cells[2].innerText + tbl_row.cells[3].innerText
    atm_desc.innerHTML = desc_txt;
    automtn_del_popup.classList.add("show");
  };
  function openNewPopup() {
      var sel = 0
      for (let l = 0; l < frm.length; l++) {
        if (frm[l].checked) {
          sel = l;
        }
      }
      ext_automtn.value = "new_automtn-" + sel;
      automtn_new_popup.classList.add("show");
    };
    function continueWithModule() {
      src_frm[1].value = ext_automtn.value
      src_frm.submit()
    }
  config_button_sav.addEventListener("click", function (event) {
      openWaitPopup();
  });
  function openWaitPopup() {
    wait_popup.classList.add("show");
  };
  new Tablesort(document.getElementById('atm-table'));
</script>